<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
     
     <script async src="https://www.googletagmanager.com/gtag/js?id=G-K1PWW3YCPK"></script>
     <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
 
     gtag('config', 'G-K1PWW3YCPK');
     </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16.png">
    <link rel="manifest" href="../../images/site.webmanifest">
    
    <link href="../../css/style.css" rel="stylesheet" media="all">
    <link href="../../css/syntax.css" rel="stylesheet" media="all">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>
      
    </title>

    <meta property="og:locale" content="en_GB" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="" />
    <meta property="og:image" content="https://puneet.uk/images/.jpg" />
    <meta property="article:tag" content="Technical blog" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="https://puneet.uk/images/.jpg" />
 
  </head>
  <body>
    <header>     
        <nav role="navigation">
            <div class="container">                            
                <nav>
    
    <a href="../../">Index</a>
    
    <a href="../../notes/">Notes</a>
    
    <a href="../../resources/">Resources</a>
    
    <a href="../../read/bookshelf/">Bookshelf</a>
    

    </nav>  
                
    
              </div>           
          </nav>
      </header>
            </div>           
        </nav>
    </header>
    
      <div class="wrap">
        <main class="container">
          <div class="row"><div class="card"><div class="new-card-body">
<h1></h1>
<p></p>





<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg><time>Nov 14, 2024</time>
</div></div></div>






         
          <div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Import</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># In case of a an &#39;No module named&#39; error, install dash, pandas etc</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># pip install dash</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">dash</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">seaborn</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">sns</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">matplotlib.pyplot</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">plt</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">from</span> <span style="color:#447fcf;text-decoration:underline">dash</span> <span style="color:#6ab825;font-weight:bold">import</span> dcc, html
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">plotly.express</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">px</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">plotly.graph_objs</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">go</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">pandas</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">pd</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">yfinance</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">yf</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Fetch data</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#S&amp;P 500 - ^GSPC</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#S&amp;P 500 Vanguard - VOO</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#S&amp;P 500 Black Rock - BSPIX</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#Vanguard Russel Index ETF - VTWO</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#FTSE 100 - ^FTSE</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#FTSE 200 - ^FTMC</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># You can define the various tickers - ticker_symbol = &#39;^GSPC&#39;</span>
</span></span><span style="display:flex;"><span>tickers = [<span style="color:#ed9d13">&#39;^GSPC&#39;</span>, <span style="color:#ed9d13">&#39;VOO&#39;</span>, <span style="color:#ed9d13">&#39;BSPIX&#39;</span>, <span style="color:#ed9d13">&#39;VTWO&#39;</span>, <span style="color:#ed9d13">&#39;^FTSE&#39;</span>, <span style="color:#ed9d13">&#39;^FTMC&#39;</span>]
</span></span><span style="display:flex;"><span>df = yf.download(tickers,  start=<span style="color:#ed9d13">&#39;2020-01-01&#39;</span>, end=<span style="color:#ed9d13">&#39;2024-10-11&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#data1 = yf.download(&#39;AAPL&#39;, start=&#39;2020-01-01&#39;, end=&#39;2023-01-01&#39;)</span>
</span></span></code></pre></div><pre><code>[*********************100%***********************]  6 of 6 completed
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Convert Closing Data to a Common Scale</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># The base value will be set at the start date of the data set. </span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># For each date, divide the closing price by the base value and multiply by 100.</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># This converts the data into a percentage of the base value. </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Create Columns for Each of the New Values</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#print(data.columns)</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Display the first few rows of the data</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">#print(data.head())</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">print</span>(df.columns)
</span></span></code></pre></div><pre><code>MultiIndex([('Adj Close', 'BSPIX'),
            ('Adj Close',   'VOO'),
            ('Adj Close',  'VTWO'),
            ('Adj Close', '^FTMC'),
            ('Adj Close', '^FTSE'),
            ('Adj Close', '^GSPC'),
            (    'Close', 'BSPIX'),
            (    'Close',   'VOO'),
            (    'Close',  'VTWO'),
            (    'Close', '^FTMC'),
            (    'Close', '^FTSE'),
            (    'Close', '^GSPC'),
            (     'High', 'BSPIX'),
            (     'High',   'VOO'),
            (     'High',  'VTWO'),
            (     'High', '^FTMC'),
            (     'High', '^FTSE'),
            (     'High', '^GSPC'),
            (      'Low', 'BSPIX'),
            (      'Low',   'VOO'),
            (      'Low',  'VTWO'),
            (      'Low', '^FTMC'),
            (      'Low', '^FTSE'),
            (      'Low', '^GSPC'),
            (     'Open', 'BSPIX'),
            (     'Open',   'VOO'),
            (     'Open',  'VTWO'),
            (     'Open', '^FTMC'),
            (     'Open', '^FTSE'),
            (     'Open', '^GSPC'),
            (   'Volume', 'BSPIX'),
            (   'Volume',   'VOO'),
            (   'Volume',  'VTWO'),
            (   'Volume', '^FTMC'),
            (   'Volume', '^FTSE'),
            (   'Volume', '^GSPC')],
           names=['Price', 'Ticker'])
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Add Normalised Columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Normalize &#39;Adj Close&#39; columns </span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">for</span> ticker <span style="color:#6ab825;font-weight:bold">in</span> [<span style="color:#ed9d13">&#39;BSPIX&#39;</span>, <span style="color:#ed9d13">&#39;VOO&#39;</span>, <span style="color:#ed9d13">&#39;VTWO&#39;</span>, <span style="color:#ed9d13">&#39;^FTMC&#39;</span>, <span style="color:#ed9d13">&#39;^FTSE&#39;</span>, <span style="color:#ed9d13">&#39;^GSPC&#39;</span>]:
</span></span><span style="display:flex;"><span>    base_value = df[(<span style="color:#ed9d13">&#39;Adj Close&#39;</span>, ticker)].iloc[<span style="color:#3677a9">0</span>]
</span></span><span style="display:flex;"><span>    normalized_column = (df[(<span style="color:#ed9d13">&#39;Adj Close&#39;</span>, ticker)] / base_value) * <span style="color:#3677a9">100</span>
</span></span><span style="display:flex;"><span>    df[(<span style="color:#ed9d13">&#39;Normalized&#39;</span>, ticker)] = normalized_column
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#24909d">print</span>(df.columns)
</span></span></code></pre></div><pre><code>MultiIndex([( 'Adj Close', 'BSPIX'),
            ( 'Adj Close',   'VOO'),
            ( 'Adj Close',  'VTWO'),
            ( 'Adj Close', '^FTMC'),
            ( 'Adj Close', '^FTSE'),
            ( 'Adj Close', '^GSPC'),
            (     'Close', 'BSPIX'),
            (     'Close',   'VOO'),
            (     'Close',  'VTWO'),
            (     'Close', '^FTMC'),
            (     'Close', '^FTSE'),
            (     'Close', '^GSPC'),
            (      'High', 'BSPIX'),
            (      'High',   'VOO'),
            (      'High',  'VTWO'),
            (      'High', '^FTMC'),
            (      'High', '^FTSE'),
            (      'High', '^GSPC'),
            (       'Low', 'BSPIX'),
            (       'Low',   'VOO'),
            (       'Low',  'VTWO'),
            (       'Low', '^FTMC'),
            (       'Low', '^FTSE'),
            (       'Low', '^GSPC'),
            (      'Open', 'BSPIX'),
            (      'Open',   'VOO'),
            (      'Open',  'VTWO'),
            (      'Open', '^FTMC'),
            (      'Open', '^FTSE'),
            (      'Open', '^GSPC'),
            (    'Volume', 'BSPIX'),
            (    'Volume',   'VOO'),
            (    'Volume',  'VTWO'),
            (    'Volume', '^FTMC'),
            (    'Volume', '^FTSE'),
            (    'Volume', '^GSPC'),
            ('Normalized', 'BSPIX'),
            ('Normalized',   'VOO'),
            ('Normalized',  'VTWO'),
            ('Normalized', '^FTMC'),
            ('Normalized', '^FTSE'),
            ('Normalized', '^GSPC')],
           names=['Price', 'Ticker'])
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Initialize the Dash app</span>
</span></span><span style="display:flex;"><span>app = dash.Dash(<span style="color:#40ffff">__name__</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Create a figure</span>
</span></span><span style="display:flex;"><span>fig = go.Figure()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Add a trace for each ticker</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">for</span> ticker <span style="color:#6ab825;font-weight:bold">in</span> tickers:
</span></span><span style="display:flex;"><span>    fig.add_trace(go.Scatter(x=df.index, y=df[<span style="color:#ed9d13">&#39;Normalized&#39;</span>, ticker], mode=<span style="color:#ed9d13">&#39;lines&#39;</span>, name=ticker))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Update layout to include title and axis labels </span>
</span></span><span style="display:flex;"><span>fig.update_layout( title=<span style="color:#ed9d13">&#39;Normalized Comparison of Adj Close Prices&#39;</span>, xaxis_title=<span style="color:#ed9d13">&#39;Date&#39;</span>, yaxis_title=<span style="color:#ed9d13">&#39;Normalized Closing Price (%)&#39;</span> )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Define the layout of the app</span>
</span></span><span style="display:flex;"><span>app.layout = html.Div(children=[
</span></span><span style="display:flex;"><span>    html.H1(children=<span style="color:#ed9d13">&#39;Stock Market Analysis Dashboard&#39;</span>),
</span></span><span style="display:flex;"><span>    dcc.Graph(
</span></span><span style="display:flex;"><span>        <span style="color:#24909d">id</span>=<span style="color:#ed9d13">&#39;example-graph&#39;</span>,
</span></span><span style="display:flex;"><span>        figure=fig
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Run the app</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">if</span> <span style="color:#40ffff">__name__</span> == <span style="color:#ed9d13">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    app.run_server(debug=<span style="color:#6ab825;font-weight:bold">True</span>)
</span></span></code></pre></div><iframe
    width="100%"
    height="650"
    src="http://127.0.0.1:8050/"
    frameborder="0"
    allowfullscreen
<blockquote>
</iframe>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">dash</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">seaborn</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">sns</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">matplotlib.pyplot</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">plt</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">from</span> <span style="color:#447fcf;text-decoration:underline">dash</span> <span style="color:#6ab825;font-weight:bold">import</span> dcc, html
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">pandas</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">pd</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#447fcf;text-decoration:underline">yfinance</span> <span style="color:#6ab825;font-weight:bold">as</span> <span style="color:#447fcf;text-decoration:underline">yf</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Initialize the Dash app</span>
</span></span><span style="display:flex;"><span>app = dash.Dash(<span style="color:#40ffff">__name__</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Download data using yfinance</span>
</span></span><span style="display:flex;"><span>tickers = [<span style="color:#ed9d13">&#39;^GSPC&#39;</span>, <span style="color:#ed9d13">&#39;VOO&#39;</span>, <span style="color:#ed9d13">&#39;BSPIX&#39;</span>, <span style="color:#ed9d13">&#39;VTWO&#39;</span>, <span style="color:#ed9d13">&#39;^FTSE&#39;</span>, <span style="color:#ed9d13">&#39;^FTMC&#39;</span>]
</span></span><span style="display:flex;"><span>df = yf.download(tickers, start=<span style="color:#ed9d13">&#39;2020-01-01&#39;</span>, end=<span style="color:#ed9d13">&#39;2024-10-11&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Normalize &#39;Adj Close&#39; columns</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">for</span> ticker <span style="color:#6ab825;font-weight:bold">in</span> tickers:
</span></span><span style="display:flex;"><span>    base_value = df[(<span style="color:#ed9d13">&#39;Adj Close&#39;</span>, ticker)].iloc[<span style="color:#3677a9">0</span>]
</span></span><span style="display:flex;"><span>    normalized_column = (df[(<span style="color:#ed9d13">&#39;Adj Close&#39;</span>, ticker)] / base_value) * <span style="color:#3677a9">100</span>
</span></span><span style="display:flex;"><span>    df[(<span style="color:#ed9d13">&#39;Normalized&#39;</span>, ticker)] = normalized_column
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># ... (Your code for data download and normalization)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Completely flatten the DataFrame</span>
</span></span><span style="display:flex;"><span>df_flattened = df.stack().reset_index()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Select the desired columns</span>
</span></span><span style="display:flex;"><span>df_flattened = df_flattened[[<span style="color:#ed9d13">&#39;Date&#39;</span>, <span style="color:#ed9d13">&#39;Ticker&#39;</span>, <span style="color:#ed9d13">&#39;Adj Close&#39;</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Filter for normalized data</span>
</span></span><span style="display:flex;"><span>df_normalized = df_flattened[df_flattened[<span style="color:#ed9d13">&#39;Ticker&#39;</span>].str.startswith(<span style="color:#ed9d13">&#39;Normalized&#39;</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># ... (Rest of your code)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Create Seaborn plot</span>
</span></span><span style="display:flex;"><span>plt.figure(figsize=(<span style="color:#3677a9">10</span>, <span style="color:#3677a9">6</span>))
</span></span><span style="display:flex;"><span>sns.lineplot(data=df_normalized, x=<span style="color:#ed9d13">&#39;Date&#39;</span>, y=<span style="color:#ed9d13">&#39;Adj Close&#39;</span>, hue=<span style="color:#ed9d13">&#39;Ticker&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Set axis labels and title</span>
</span></span><span style="display:flex;"><span>plt.xlabel(<span style="color:#ed9d13">&#39;Date&#39;</span>)
</span></span><span style="display:flex;"><span>plt.ylabel(<span style="color:#ed9d13">&#39;Normalized Closing Price (%)&#39;</span>)
</span></span><span style="display:flex;"><span>plt.title(<span style="color:#ed9d13">&#39;Normalized Comparison of Adj Close Prices&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Save the plot as an image</span>
</span></span><span style="display:flex;"><span>plt.savefig(<span style="color:#ed9d13">&#39;assets/normalized_comparison.png&#39;</span>)
</span></span><span style="display:flex;"><span>plt.show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Define the layout of the Dash app</span>
</span></span><span style="display:flex;"><span>app.layout = html.Div(children=[
</span></span><span style="display:flex;"><span>    html.H1(children=<span style="color:#ed9d13">&#39;Stock Market Analysis Dashboard&#39;</span>),
</span></span><span style="display:flex;"><span>    html.Img(src=<span style="color:#ed9d13">&#39;/assets/normalized_comparison.png&#39;</span>)  <span style="color:#999;font-style:italic"># Ensure this path is correct</span>
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Run the app</span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">if</span> <span style="color:#40ffff">__name__</span> == <span style="color:#ed9d13">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    app.run_server(debug=<span style="color:#6ab825;font-weight:bold">True</span>)
</span></span></code></pre></div><pre><code>[*********************100%***********************]  6 of 6 completed
C:\Users\pthuk\AppData\Local\Temp\ipykernel_38620\2762590416.py:24: FutureWarning:

The previous implementation of stack is deprecated and will be removed in a future version of pandas. See the What's New notes for pandas 2.1.0 for details. Specify future_stack=True to adopt the new implementation and silence this warning.




---------------------------------------------------------------------------

FileNotFoundError                         Traceback (most recent call last)

Cell In[63], line 44
     41 plt.title('Normalized Comparison of Adj Close Prices')
     43 # Save the plot as an image
---&gt; 44 plt.savefig('assets/normalized_comparison.png')
     45 plt.show()
     47 # Define the layout of the Dash app


File c:\Python312\Lib\site-packages\matplotlib\pyplot.py:1228, in savefig(*args, **kwargs)
   1225 fig = gcf()
   1226 # savefig default implementation has no return, so mypy is unhappy
   1227 # presumably this is here because subclasses can return?
-&gt; 1228 res = fig.savefig(*args, **kwargs)  # type: ignore[func-returns-value]
   1229 fig.canvas.draw_idle()  # Need this if 'transparent=True', to reset colors.
   1230 return res


File c:\Python312\Lib\site-packages\matplotlib\figure.py:3395, in Figure.savefig(self, fname, transparent, **kwargs)
   3393     for ax in self.axes:
   3394         _recursively_make_axes_transparent(stack, ax)
-&gt; 3395 self.canvas.print_figure(fname, **kwargs)


File c:\Python312\Lib\site-packages\matplotlib\backend_bases.py:2204, in FigureCanvasBase.print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, pad_inches, bbox_extra_artists, backend, **kwargs)
   2200 try:
   2201     # _get_renderer may change the figure dpi (as vector formats
   2202     # force the figure dpi to 72), so we need to set it again here.
   2203     with cbook._setattr_cm(self.figure, dpi=dpi):
-&gt; 2204         result = print_method(
   2205             filename,
   2206             facecolor=facecolor,
   2207             edgecolor=edgecolor,
   2208             orientation=orientation,
   2209             bbox_inches_restore=_bbox_inches_restore,
   2210             **kwargs)
   2211 finally:
   2212     if bbox_inches and restore_bbox:


File c:\Python312\Lib\site-packages\matplotlib\backend_bases.py:2054, in FigureCanvasBase._switch_canvas_and_return_print_method.&lt;locals&gt;.&lt;lambda&gt;(*args, **kwargs)
   2050     optional_kws = {  # Passed by print_figure for other renderers.
   2051         &quot;dpi&quot;, &quot;facecolor&quot;, &quot;edgecolor&quot;, &quot;orientation&quot;,
   2052         &quot;bbox_inches_restore&quot;}
   2053     skip = optional_kws - {*inspect.signature(meth).parameters}
-&gt; 2054     print_method = functools.wraps(meth)(lambda *args, **kwargs: meth(
   2055         *args, **{k: v for k, v in kwargs.items() if k not in skip}))
   2056 else:  # Let third-parties do as they see fit.
   2057     print_method = meth


File c:\Python312\Lib\site-packages\matplotlib\backends\backend_agg.py:496, in FigureCanvasAgg.print_png(self, filename_or_obj, metadata, pil_kwargs)
    449 def print_png(self, filename_or_obj, *, metadata=None, pil_kwargs=None):
    450     &quot;&quot;&quot;
    451     Write the figure to a PNG file.
    452 
   (...)
    494         *metadata*, including the default 'Software' key.
    495     &quot;&quot;&quot;
--&gt; 496     self._print_pil(filename_or_obj, &quot;png&quot;, pil_kwargs, metadata)


File c:\Python312\Lib\site-packages\matplotlib\backends\backend_agg.py:445, in FigureCanvasAgg._print_pil(self, filename_or_obj, fmt, pil_kwargs, metadata)
    440 &quot;&quot;&quot;
    441 Draw the canvas, then save it using `.image.imsave` (to which
    442 *pil_kwargs* and *metadata* are forwarded).
    443 &quot;&quot;&quot;
    444 FigureCanvasAgg.draw(self)
--&gt; 445 mpl.image.imsave(
    446     filename_or_obj, self.buffer_rgba(), format=fmt, origin=&quot;upper&quot;,
    447     dpi=self.figure.dpi, metadata=metadata, pil_kwargs=pil_kwargs)


File c:\Python312\Lib\site-packages\matplotlib\image.py:1676, in imsave(fname, arr, vmin, vmax, cmap, format, origin, dpi, metadata, pil_kwargs)
   1674 pil_kwargs.setdefault(&quot;format&quot;, format)
   1675 pil_kwargs.setdefault(&quot;dpi&quot;, (dpi, dpi))
-&gt; 1676 image.save(fname, **pil_kwargs)


File c:\Python312\Lib\site-packages\PIL\Image.py:2563, in Image.save(self, fp, format, **params)
   2561         fp = builtins.open(filename, &quot;r+b&quot;)
   2562     else:
-&gt; 2563         fp = builtins.open(filename, &quot;w+b&quot;)
   2564 else:
   2565     fp = cast(IO[bytes], fp)


FileNotFoundError: [Errno 2] No such file or directory: 'C:\\Users\\pthuk\\Documents\\git\\notes\\content\\python\\assets\\normalized_comparison.png'
</code></pre>
<p><img src="stock_market_analysis_files/stock_market_analysis_6_2.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#24909d">print</span>(df_reset.columns)
</span></span></code></pre></div><pre><code>MultiIndex([(      'Date',      ''),
            ( 'Adj Close', 'BSPIX'),
            ( 'Adj Close',   'VOO'),
            ( 'Adj Close',  'VTWO'),
            ( 'Adj Close', '^FTMC'),
            ( 'Adj Close', '^FTSE'),
            ( 'Adj Close', '^GSPC'),
            (     'Close', 'BSPIX'),
            (     'Close',   'VOO'),
            (     'Close',  'VTWO'),
            (     'Close', '^FTMC'),
            (     'Close', '^FTSE'),
            (     'Close', '^GSPC'),
            (      'High', 'BSPIX'),
            (      'High',   'VOO'),
            (      'High',  'VTWO'),
            (      'High', '^FTMC'),
            (      'High', '^FTSE'),
            (      'High', '^GSPC'),
            (       'Low', 'BSPIX'),
            (       'Low',   'VOO'),
            (       'Low',  'VTWO'),
            (       'Low', '^FTMC'),
            (       'Low', '^FTSE'),
            (       'Low', '^GSPC'),
            (      'Open', 'BSPIX'),
            (      'Open',   'VOO'),
            (      'Open',  'VTWO'),
            (      'Open', '^FTMC'),
            (      'Open', '^FTSE'),
            (      'Open', '^GSPC'),
            (    'Volume', 'BSPIX'),
            (    'Volume',   'VOO'),
            (    'Volume',  'VTWO'),
            (    'Volume', '^FTMC'),
            (    'Volume', '^FTSE'),
            (    'Volume', '^GSPC'),
            ('Normalized', '^GSPC'),
            ('Normalized',   'VOO'),
            ('Normalized', 'BSPIX'),
            ('Normalized',  'VTWO'),
            ('Normalized', '^FTSE'),
            ('Normalized', '^FTMC')],
           names=['Price', 'Ticker'])
</code></pre>

          
      </main>
      </div>
    
    


<footer class="site-footer">
    <div class="container">
        <div class="footer-content">
            <div>&copy; 2026 Puneet (Paul) Singh Thukral</div>
             <div> 
                
                Site last updated: February 2026
              </div>
        </div>
    </div>
</footer>




     
     <script
     src="https://code.jquery.com/jquery-3.7.1.min.js"
     integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
     crossorigin="anonymous">
    </script>
    <script src="../../js/utility.js"></script>
     
  </body>
</html>